language: node_js
node_js:
  - "11"
cache: yarn
before_install:
  - curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version 1.15
  - export PATH="$HOME/.yarn/bin:$PATH"
jobs:
  include:
    - stage: build
      name: Build API
      script: yarn build:api
    - name: Build client
      script: yarn build:client
    - name: Build server
      script: yarn build:server
    # TODO: Test
    # TODO: allow fail
    - stage: lint
      name: Lint API
      script: yarn lint:api
    - name: Lint client
      script: yarn lint:client
    - name: Lint server
      script: yarn lint:server
    # TODO: Deploy